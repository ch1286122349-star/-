# é‚®ä»¶åŠŸèƒ½ä½¿ç”¨è¯´æ˜

## ğŸ‰ é‚®ä»¶æ”¶å‘åŠŸèƒ½å·²å®Œæˆï¼

ä½ çš„å…¬å¸é‚®ç®± `sheldon@zyramech.com` ç°åœ¨å·²ç»æ”¯æŒè‡ªåŠ¨æ”¶å‘é‚®ä»¶äº†ã€‚

---

## ğŸ“ åˆ›å»ºçš„æ–‡ä»¶

| æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|
| `scripts/email-sender.js` | é‚®ä»¶å‘é€æ¨¡å— |
| `scripts/email-receiver.js` | é‚®ä»¶æ¥æ”¶æ¨¡å— |
| `scripts/email-test.js` | åŠŸèƒ½æµ‹è¯•è„šæœ¬ |
| `.env.example` | é…ç½®æ¨¡æ¿ |

---

## ğŸ”§ ä½¿ç”¨å‰å‡†å¤‡

### 1. åˆ›å»º `.env` æ–‡ä»¶
```bash
cp .env.example .env
```

### 2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„é‚®ç®±å¯†ç 
```env
EMAIL_USER=sheldon@zyramech.com
EMAIL_PASS=ä½ çš„é‚®ç®±å¯†ç 
EMAIL_SMTP_HOST=smtp.zyramech.com
EMAIL_SMTP_PORT=465
EMAIL_IMAP_HOST=imap.zyramech.com
EMAIL_IMAP_PORT=993
```

---

## ğŸ§ª æµ‹è¯•åŠŸèƒ½

### è¿è¡Œå®Œæ•´æµ‹è¯•
```bash
node scripts/email-test.js
```

æµ‹è¯•å†…å®¹ï¼š
- âœ… éªŒè¯é‚®ç®±è¿æ¥
- âœ… è·å–æ”¶ä»¶ç®±é‚®ä»¶ï¼ˆå‰5å°ï¼‰
- âœ… è·å–æœªè¯»é‚®ä»¶
- âœ… å‘é€æµ‹è¯•é‚®ä»¶

---

## ğŸŒ API æ¥å£

æœåŠ¡å™¨é‡å¯åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ API ä½¿ç”¨é‚®ä»¶åŠŸèƒ½ï¼š

### å‘é€é‚®ä»¶
```bash
POST /api/email/send
Content-Type: application/json

{
  "to": "recipient@example.com",
  "subject": "é‚®ä»¶ä¸»é¢˜",
  "text": "çº¯æ–‡æœ¬å†…å®¹",
  "html": "<h1>HTMLå†…å®¹</h1>"  // å¯é€‰
}
```

### è·å–æ”¶ä»¶ç®±
```bash
GET /api/email/inbox?limit=10
```

### è·å–æœªè¯»é‚®ä»¶
```bash
GET /api/email/unread
```

### æ ‡è®°é‚®ä»¶ä¸ºå·²è¯»
```bash
POST /api/email/mark-read
Content-Type: application/json

{
  "uid": 12345
}
```

### æœç´¢é‚®ä»¶
```bash
GET /api/email/search?q=å…³é”®è¯&type=SUBJECT
```

### å‘é€æµ‹è¯•é‚®ä»¶
```bash
POST /api/email/test-send
```

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åœ¨ä»£ç ä¸­å‘é€é‚®ä»¶
```javascript
const { sendEmail } = require('./scripts/email-sender');

// å‘é€é‚®ä»¶
await sendEmail({
  to: 'customer@example.com',
  subject: 'è®¢å•ç¡®è®¤',
  text: 'æ‚¨çš„è®¢å•å·²ç¡®è®¤',
  html: '<h2>è®¢å•ç¡®è®¤</h2><p>æ‚¨çš„è®¢å•å·²ç¡®è®¤</p>'
});
```

### è·å–æœªè¯»é‚®ä»¶
```javascript
const { getUnreadEmails } = require('./scripts/email-receiver');

const unreadEmails = await getUnreadEmails();
console.log(`æœ‰ ${unreadEmails.length} å°æœªè¯»é‚®ä»¶`);
```

---

## ğŸš€ å¯åŠ¨æœåŠ¡å™¨

```bash
npm start
```

æœåŠ¡å™¨å¯åŠ¨åï¼Œé‚®ä»¶ API å°±å¯ä»¥ä½¿ç”¨äº†ï¼

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¯†ç å®‰å…¨**ï¼š`.env` æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œä¸è¦æäº¤åˆ° Git
2. **é‚®ç®±è®¾ç½®**ï¼šç¡®ä¿é‚®ç®±å·²å¼€å¯ IMAP/SMTP åŠŸèƒ½
3. **é˜²ç«å¢™**ï¼šç¡®ä¿æœåŠ¡å™¨å¯ä»¥è®¿é—®é‚®ç®±çš„ IMAP/SMTP ç«¯å£

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. æµ‹è¯•é‚®ä»¶åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ
2. æ ¹æ®éœ€è¦åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯å°æ—¶æ£€æŸ¥æœªè¯»é‚®ä»¶ï¼‰
3. é›†æˆåˆ°ä¸šåŠ¡æµç¨‹ä¸­ï¼ˆå¦‚è®¢å•é€šçŸ¥ã€ç”¨æˆ·æ³¨å†Œç¡®è®¤ç­‰ï¼‰

æœ‰é—®é¢˜éšæ—¶é—®æˆ‘ï¼
